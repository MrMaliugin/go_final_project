Запуск приложения и тестирование

Требования

Docker должен быть установлен на вашем компьютере.
Убедитесь, что у вас есть доступ к файлу базы данных scheduler.db, и он находится в корневой папке проекта.

Шаги для сборки и запуска проекта

1. Склонируйте репозиторий или подготовьте локальные файлы
Убедитесь, что все необходимые файлы находятся в вашем проекте, включая:

main.go
middlewares.go
task.go
db.go
scheduler.db
Dockerfile
Сборка Docker образа

2. В корневой папке проекта выполните следующую команду для сборки Docker образа:

docker build -t scheduler-app .

Эта команда создаст Docker образ с вашим приложением, используя инструкции из Dockerfile.

3. Запуск контейнера

После успешной сборки запустите контейнер с вашим приложением:

docker run -p 7540:7540 --env TODO_PASSWORD=12345 --env TODO_DBFILE=/app/scheduler.db -v $(pwd)/scheduler.db:/app/scheduler.db scheduler-app

• -p 7540:7540: Пробрасывает порт 7540 из контейнера в вашу систему, чтобы приложение было доступно по этому порту.
• --env TODO_PASSWORD=12345: Устанавливает пароль для аутентификации.
• --env TODO_DBFILE=/app/scheduler.db: Указывает путь к файлу базы данных внутри контейнера.
• -v $(pwd)/scheduler.db:/app/scheduler.db: Монтирует файл базы данных из вашей локальной директории в контейнер.

4. Откройте приложение в браузере

Перейдите по следующему адресу в браузере:

http://localhost:7540/login.html

Введите пароль 12345, чтобы войти в систему.

______________________________________________________________

Тестирование API
После того как вы успешно вошли в систему, вы можете использовать следующие API для управления задачами:

1. Получение списка задач:

GET /api/tasks

2. Создание новой задачи:

POST /api/task

3. Отметить задачу выполненной:

POST /api/task/done

Для выполнения запросов можно использовать Postman или любой другой HTTP-клиент. Важно убедиться, что токен JWT находится в куках браузера или передается в запросах, чтобы аутентификация проходила корректно.

______________________________________________________________

Тестирование в Go

Если вам необходимо протестировать код, написанный на Go, и вы хотите запустить тесты в окружении локальной машины:

1. Убедитесь, что у вас установлены необходимые зависимости:

go mod tidy

2.Запустите тесты:

go test ./tests

Эти тесты проверяют корректную работу вашего приложения, включая логику аутентификации, работы с базой данных и API.

______________________________________________________________

Остановка контейнера
После завершения работы с приложением вы можете остановить Docker-контейнер:

1. Найдите ID контейнера:

docker ps

2. Остановите контейнер:

docker stop <container-id>
